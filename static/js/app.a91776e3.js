(function(t){function e(e){for(var o,s,a=e[0],c=e[1],l=e[2],u=0,h=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function s(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"9397758b"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=s(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("e792"),n("0cdd");var o=n("2b0e"),i=n("5f5b");n("ab8b"),n("2dd8");o["default"].use(i["a"]);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),n("router-view")],1)},s=[],a=(n("5c0b"),n("2877")),c={},l=Object(a["a"])(c,r,s,!1,null,null,null),u=l.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},p=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[t._m(0),n("div",{staticClass:"col-lg"},[n("canvas",{attrs:{id:"can",width:"400",height:"400"},on:{mousedown:t.beginDrawing,touchstart:t.beginDrawing,mousemove:t.draw,touchmove:t.draw,mouseup:t.stopDrawing,touchend:t.stopDrawing}}),n("br"),n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button",id:"reset"},on:{click:t.reset}},[t._v(" Reset ")]),t.isEraser?n("button",{staticClass:"btn btn-danger m-1",attrs:{type:"button",id:"eraser"},on:{click:t.toggleEraser}},[t._v(" Eraser ")]):n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button",id:"eraser"},on:{click:t.toggleEraser}},[t._v(" Eraser ")]),n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button",id:"undo"},on:{click:t.undo}},[t._v(" Undo ")]),n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button",id:"redo"},on:{click:t.redo}},[t._v(" Redo ")]),n("button",{staticClass:"btn btn-primary m-1",attrs:{type:"button",id:"predict"},on:{click:t.predict}},[t._v(" Predict ")]),t._m(1)])])])])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-lg"},[n("img",{attrs:{alt:"Vue logo",src:"/static/scoring.png",width:"400",height:"275"}}),n("div",{attrs:{id:"my_dataviz"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{method:"post","accept-charset":"utf-8",name:"form1"}},[n("input",{attrs:{name:"data",id:"data",type:"hidden"}})])}],m=n("3835"),g=(n("4fad"),n("99af"),n("d81d"),n("5698")),b={name:"HelloWorld",data:function(){return{clicked:!1,canvas:null,context:null,points:[],responseJSON:{},isEraser:!1,rawPredictions:0,history:{redo_list:[],undo_list:[],saveState:function(t,e,n){n=n||!1,n||(this.redo_list=[]),(e||this.undo_list).push(t.toDataURL())},undo:function(t,e){this.restoreState(t,e,this.undo_list,this.redo_list)},redo:function(t,e){this.restoreState(t,e,this.redo_list,this.undo_list)},restoreState:function(t,e,n,o){if(n.length){this.saveState(t,o,!0);var i=n.pop(),r=document.createElement("img");r.src=i,r.onload=function(){e.clearRect(0,0,t.width,t.height),e.drawImage(r,0,0,t.width,t.height,0,0,t.width,t.height)}}}}}},props:{msg:String},methods:{sigmoid:function(t){return 1/(1+Math.pow(Math.E,-t))},getMousePos:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},beginDrawing:function(t){if(t.preventDefault(),this.clicked=!0,this.context.save(),"mousedown"==t.type)var e=this.getMousePos(this.canvas,t),n=e.x,o=e.y;else if("touchstart"==t.type){var i=t.touches[0],r=new MouseEvent("mousedown",{clientX:i.clientX,clientY:i.clientY});return void this.beginDrawing(r)}this.history.saveState(this.canvas),this.points.length=0,this.points.push({x:n,y:o}),this.context.moveTo(n,o)},draw:function(t){t.preventDefault();var e=null,n=null,o=null;if(1==this.clicked&&"mousemove"==t.type)e=this.getMousePos(this.canvas,t),n=e.x,o=e.y,this.points.push({x:n,y:o});else if(1==this.clicked&&"touchmove"==t.type){var i=t.touches[0],r=new MouseEvent("mousemove",{clientX:i.clientX,clientY:i.clientY});return void this.draw(r)}if(this.points.length>=3){var s=this.points.length-1,a=(this.points[s].x+this.points[s-1].x)/2,c=(this.points[s].y+this.points[s-1].y)/2;this.context.quadraticCurveTo(this.points[s-1].x,this.points[s-1].y,a,c),this.context.stroke(),this.context.beginPath(),this.context.moveTo(a,c)}},stopDrawing:function(t){t.preventDefault();var e=this.getMousePos(this.canvas,t),n=e.x,o=e.y;if(1==this.clicked&&"mouseup"==t.type)e=this.getMousePos(this.canvas,t),n=e.x,o=e.y,this.points.push({x:n,y:o});else if(1==this.clicked&&("touchend"==t.type||"touchleave"==t.type)){var i=t.changedTouches[0],r=new MouseEvent("mousemove",{clientX:i.clientX,clientY:i.clientY});return void this.draw(r)}if(this.points.length>=3){var s=this.points.length-1;this.context.quadraticCurveTo(this.points[s].x,this.points[s].y,n,o),this.context.stroke()}this.points.length=0,this.clicked=!1},reset:function(){this.context.strokeStyle="black",this.context.lineWidth=3,this.context.lineCap="round",this.context.fillStyle="#fff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},toggleEraser:function(){this.isEraser=!this.isEraser,this.isEraser?(this.context.strokeStyle="#fff",this.context.lineWidth=10):(this.context.strokeStyle="black",this.context.lineWidth=3)},predict:function(){console.log("in predict");var t=this.canvas.toDataURL("image/png");document.getElementById("data").value=t;var e=new FormData(document.forms["form1"]),n=new XMLHttpRequest({mozSystem:!0});n.open("POST","http://35.222.129.100/predict",!0);var o=this;n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE){for(var t=JSON.parse(n.responseText),e=0,i=Object.entries(t);e<i.length;e++){var r=Object(m["a"])(i[e],2),s=r[0],a=r[1];console.log("".concat(s,": ").concat(a))}o.rawPredictions=t,console.log(o.rawPredictions),console.log(o.processedPredictions)}},n.onload=function(){},n.send(e)},undo:function(){this.history.undo(this.canvas,this.context)},redo:function(){this.history.redo(this.canvas,this.context)},setupCanvas:function(t){var e=window.devicePixelRatio||1,n=t.getBoundingClientRect();t.width=n.width*e,t.height=n.height*e;var o=t.getContext("2d");return o.scale(e,e),console.log(o),t.width=n.width,t.height=n.height,o}},computed:{processedPredictions:function(){if(console.log(this.rawPredictions),null==this.rawPredictions)return null;for(var t=[],e=0,n=Object.entries(this.rawPredictions);e<n.length;e++){var o=Object(m["a"])(n[e],2),i=o[0],r=o[1];console.log("".concat(i,": ").concat(r)),t.push({index:i,name:r[0],prob:r[1]})}return console.log(t),t}},watch:{rawPredictions:function(){var t={top:10,right:10,bottom:30,left:30},e=300-t.left-t.right,n=250-t.top-t.bottom;g["e"]("svg").remove();var o=g["e"]("#my_dataviz").append("svg").attr("width",e+t.left+t.right).attr("height",n+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),i=g["c"]().range([0,e]).domain(this.processedPredictions.map((function(t){return t.index}))).padding(.2);o.append("g").attr("transform","translate(0,"+n+")").call(g["a"](i)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");var r=g["d"]().domain([0,1]).range([n,0]);o.append("g").call(g["b"](r)),o.selectAll("mybar").data(this.processedPredictions).enter().append("rect").attr("x",(function(t){return i(t.index)})).attr("y",(function(t){return r(t.prob)})).attr("width",i.bandwidth()).attr("height",(function(t){return n-r(t.prob)})).attr("fill","#69b3a2")}},mounted:function(){this.canvas=document.getElementById("can"),this.context=this.setupCanvas(document.getElementById("can")),this.context.strokeStyle="black",this.context.lineWidth=3,this.context.lineCap="round",this.context.fillStyle="#fff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),console.log(this.canvas.width)}},y=b,w=(n("5dba"),Object(a["a"])(y,f,v,!1,null,"1c2ca372",null)),x=w.exports,_={name:"Home",components:{HelloWorld:x}},P=_,k=Object(a["a"])(P,h,p,!1,null,null,null),E=k.exports;o["default"].use(d["a"]);var S=[{path:"/",name:"Home",component:E},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],C=new d["a"]({mode:"history",base:"/",routes:S}),O=C,j=n("2f62");o["default"].use(j["a"]);var M=new j["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("4989");o["default"].config.productionTip=!1,new o["default"]({router:O,store:M,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5dba":function(t,e,n){"use strict";n("e35b")},"9c0c":function(t,e,n){},e35b:function(t,e,n){}});
//# sourceMappingURL=app.a91776e3.js.map